library("cpm")
x <- c(rnorm(500,6000,1),rnorm(200,5000,1))
# x <- c(-0.198505938741642, -1.06829562033707, -0.376302425292711, -1.26563778303559, 0.970912785237608, 0.673626627168387, -0.229070391149813, -0.267286598491852, -0.0606491191490204, -1.06147930634478, -1.01682397187633, 1.74704775506717, 0.911385251735291, -0.865519470621605, -0.222689997752648, -0.726953872390259, 0.772929139777866, -1.16812211705501, 1.5840408660248, 0.575681266063653, -0.686766483284739, 0.378804227760737, -2.09135715484131, -1.02395395602304, 0.600982778743558, -0.323338451736311, -0.908289205744784, 0.169385619113426, -0.715781788560222, 0.60704122078446, -0.234412904810582, 0.0444674249088413, -0.826572830323999, -1.68249701512633, 0.763187058330654, 1.61311063011941, 0.721841245565113, -0.298871791218492, 0.784950316556481, 0.28771304482406, -0.512513603187608, -1.2619627884599, -0.174965445157808, 0.236128675843974, -2.31746618632159, -1.56101257771186, 0.113568391177928, -1.08535574161004, 0.395305640987991, -0.0465163575277815, 1.46733836220548, 2.02604576509906, 1.59472598093086, 0.59744453418092, 1.05821708382012, 0.374995592648228, -0.152183319934612, 0.947186307550902, 0.949364328568514, 0.460240857437936, 0.298052627190531, 1.05009333360764, 0.277210251981256, 1.20810669774222, 1.97867171984501, 0.89684310644916, 0.377099785644773, 1.08148909572126, 0.776564103745269, 0.992527331716248)
# detectChangePoint(x,"GLR",ARL0=500,startup=20)
# str = ""
# for (xVal in x) {
#     str= paste(str, xVal,",")
# }


# x <- c(rnorm(100,0,1),rnorm(100,1,1), rnorm(100,0,1), rnorm(100,-1,1))
result <- processStream(x,"GLR",ARL0=500,startup=20)
plot(x)
for (i in 1:length(result$changePoints)) {
    abline(v=result$changePoints[i], lty=2)
}